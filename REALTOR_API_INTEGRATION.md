# 국토교통부 실거래가 API 연동 가이드

## 현재 구현 상태

### 1. 프록시 서버 구현 완료
- **파일**: `api-proxy.js`
- **포트**: 3001
- **기능**: CORS 우회 및 XML → JSON 변환
- **엔드포인트**: `GET /api/apartment-prices?region={지역코드}&yearMonth={년월}`

### 2. 프론트엔드 연동 완료
- **파일**: `script.js`
- **함수**: `fetchRealApartmentData(region, maxPrice)`
- **특징**: 
  - 실거래가 API 호출 시도
  - 실패 시 기존 하드코딩 데이터 폴백
  - 실제 데이터에는 `isRealData: true` 플래그 추가

### 3. 지역 코드 매핑 완료
- 36개 지역 모두 국토교통부 법정동 코드와 매핑됨
- 예: `seoul-gangnam` → `11680`

## API 키 설정 방법

1. 공공데이터포털(data.go.kr) 가입
2. "국토교통부_아파트 매매 실거래가 자료" 검색
3. API 활용신청 (자동 승인)
4. 발급받은 서비스키를 환경변수로 설정:
   ```bash
   export MOLIT_API_KEY="발급받은_서비스키"
   ```

## 프록시 서버 실행

```bash
# 패키지 설치
npm install

# 서버 실행 (개발)
npm run dev

# 서버 실행 (프로덕션)
npm start
```

## 테스트 방법

1. 프록시 서버 실행
2. 웹사이트에서 아파트 추천 기능 사용
3. 개발자 도구의 네트워크 탭에서 API 호출 확인
4. `http://localhost:3001/api/apartment-prices` 호출 여부 확인

## 주의사항

- 일일 API 호출 한도: 1,000건 (개발계정)
- 운영 시 반드시 캐싱 구현 필요
- 실거래가 데이터는 1-2개월 지연될 수 있음

## 향후 개선사항

1. **캐싱 구현**: Redis 또는 메모리 캐싱으로 API 호출 최적화
2. **에러 처리 강화**: 네트워크 오류, API 한도 초과 등 대응
3. **데이터 정제**: 이상치 제거, 평균 시세 계산
4. **이미지 연동**: 카카오맵 또는 네이버 부동산 이미지 API 연동
5. **배포 설정**: 프로덕션 환경에서의 프록시 서버 설정